version: "3.8"
services:
  push_alarm:
    image: push_alarm:0.0.3
    build:
      context: .
      dockerfile: Dockerfile
      args:
        - DOCKER_UID=${DOCKER_UID}
        - DOCKER_GUID=${DOCKER_GUID}
        - DOCKER_TIME_CONT=${DOCKER_TIME_CONT}
        - DOCKER_TIME_CITY=${DOCKER_TIME_CITY}
    container_name: push_alarm
    volumes:
      - $HOME/push_alarm.d/db_data:/db_data
      - $HOME/push_alarm.d/.env:/app_env/.env:ro
    cap_drop:
      - all
    security_opt:
      - no-new-privileges
    ipc: private
    restart: always
    networks:
      - push_alarm_net
    logging:
      options:
        max-size: 4mb
    deploy:
      resources:
        limits:
          memory: 16mb
networks:
  push_alarm_net:
    name: push_alarm_net